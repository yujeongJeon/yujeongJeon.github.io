## 5. ê°’ì„ ì°¸ì¡°ë¡œ ë°”ê¾¸ê¸°

[ì°¸ì¡°ë¥¼ ê°’ìœ¼ë¡œ ë°”ê¾¸ê¸°(9.4)ê³¼ ë°˜ëŒ€](./9-4.md)

- ë‹¨ì¼ ê°ì²´ Aê°€ ìˆ˜ì •ë˜ì—ˆì„ ë•Œ ì—¬ëŸ¬ ê°ì²´ì—ì„œ í•´ë‹¹ ì‚¬í•­ì„ ë°˜ì˜í•´ì•¼í•˜ëŠ” ê²½ìš°

ë°ì´í„°ì˜ ì¼ê´€ì„±ì„ ìœ„í•´ ê°’ì„ ì°¸ì¡°í•˜ë„ë¡ í•œë‹¤. ë‹¤ë§Œ, A ê°ì²´ì˜ ìˆ˜ì •ìœ¼ë¡œ ì¸í•œ ì‚¬ì´ë“œì´íŽ™íŠ¸ë¥¼ ì£¼ì˜í•˜ìž.

### ì ˆì°¨
----

1. ë ˆì½”ë“œì˜ ìœ íš¨ë²”ìœ„ê°€ ì œí•œì ì´ë¼ë©´ í•„ë“œì— ì ‘ê·¼í•˜ëŠ” ëª¨ë“  ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„ í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤. ì´í›„ ë‹¨ê³„ëŠ” í•„ìš”ì—†ë‹¤.
2. ë ˆì½”ë“œê°€ ìº¡ìŠí™”ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ìº¡ìŠí™”
3. ìº¡ìŠí™”ëœ ê°ì²´ì•ˆì˜ private í•„ë“œëª…ì„ ë³€ê²½í•˜ê³ , ê·¸ì— ë§žê²Œ ë§¤ì„œë“œ ìˆ˜ì •
4. í…ŒìŠ¤íŠ¸
5. ìƒì„±ìžì˜ ë§¤ê°œë³€ìˆ˜ ì¤‘ í•„ë“œì™€ ì´ë¦„ì´ ê²¹ì¹˜ëŠ” ê²Œ ìžˆë‹¤ë©´ í•¨ìˆ˜ ì„ ì–¸ ë°”ê¾¸ê¸°ë¡œ ë³€ê²½í•œë‹¤.
6. ì ‘ê·¼ìžë“±ì˜ ì´ë¦„ë„ ë°”ê¿”ì¤€ë‹¤.

----

### ì˜ˆì‹œ ì½”ë“œ

#### ðŸ˜ž Before
```javascript
class Order {
    constructor(data) {
        this._number = data.number
        this._customer = new Costomer(data.customerId)
    }

    get customer() {
    return this._customer
    }
}

class Costomer {
    constructor(id) {
    this._id = id
    }

    get id() {
    return this._id
    }
}
```

#### ðŸ˜ƒ After
```javascript
class Order {
    constructor(data) {
        this._number = data.number
        this._customer = registerCustomer(data.customerId)
    }

    get customer() {
        return this._customer
    }
}

class Customer {
    constructor(id) {
        this._id = id
    }

    get id() {
        return this._id
    }
}

// ì €ìž¥ì†Œ ê°ì²´
let _repositoryData

export const initialize = () => {
    _repositoryData = {}
    _repositoryData.customer = new Map()
}

export const findCustomer = (id) => {
    return _repositoryData.customer.get(id)
}

export const registerCustomer = (id) => {
    if (!_repositoryData.customer.has(id)) {
        _repositoryData.customer.set(id, new Customer(id))
    }

    return findCustomer(id)
}
```