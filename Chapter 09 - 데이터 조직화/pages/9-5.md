## 5. ê°’ì„ ì°¸ì¡°ë¡œ ë°”ê¾¸ê¸°

[ì°¸ì¡°ë¥¼ ê°’ìœ¼ë¡œ ë°”ê¾¸ê¸°(9.4)ê³¼ ë°˜ëŒ€](./9-4.md)

- ë°ì´í„°ë¥¼ ê°±ì‹ í•  ë•Œ, í•˜ë‚˜ë¼ë„ ë†“ì¹˜ë©´ ë°ì´í„°ì˜ ì¼ê´€ì„±ì´ ê¹¨ì§ˆ ë•Œ<br/>

(ì£¼ì˜) A ê°ì²´ì˜ ìˆ˜ì •ìœ¼ë¡œ ì¸í•œ ì‚¬ì´ë“œì´í™íŠ¸ë¥¼ ì£¼ì˜í•˜ì.

### ì˜ˆì‹œ
    ê³ ê° ì£¼ë¬¸ ë°ì´í„°ë¥¼ ê°±ì‹ í•  ë•Œ í•´ë‹¹ ê³ ê°ì— ì†í•œ ì£¼ë¬¸ ë°ì´í„°ë“¤ì— ìˆ˜ì •ì‚¬í•­ì„ í•œë²ˆì— ë°˜ì˜í•  ê²½ìš°



### ì ˆì°¨
----

1. ë ˆì½”ë“œì˜ ìœ íš¨ë²”ìœ„ê°€ ì œí•œì ì´ë¼ë©´ í•„ë“œì— ì ‘ê·¼í•˜ëŠ” ëª¨ë“  ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„ í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤. ì´í›„ ë‹¨ê³„ëŠ” í•„ìš”ì—†ë‹¤.
2. ë ˆì½”ë“œê°€ ìº¡ìŠí™”ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ìº¡ìŠí™”
3. ìº¡ìŠí™”ëœ ê°ì²´ì•ˆì˜ private í•„ë“œëª…ì„ ë³€ê²½í•˜ê³ , ê·¸ì— ë§ê²Œ ë§¤ì„œë“œ ìˆ˜ì •
4. í…ŒìŠ¤íŠ¸
5. ìƒì„±ìì˜ ë§¤ê°œë³€ìˆ˜ ì¤‘ í•„ë“œì™€ ì´ë¦„ì´ ê²¹ì¹˜ëŠ” ê²Œ ìˆë‹¤ë©´ í•¨ìˆ˜ ì„ ì–¸ ë°”ê¾¸ê¸°ë¡œ ë³€ê²½í•œë‹¤.
6. ì ‘ê·¼ìë“±ì˜ ì´ë¦„ë„ ë°”ê¿”ì¤€ë‹¤.

----

### ì˜ˆì‹œ ì½”ë“œ

#### ğŸ˜ Before
```javascript
class Order {
    constructor(data) {
        this._number = data.number
        this._customer = new Costomer(data.customerId)
    }

    get customer() {
    return this._customer
    }
}

class Costomer {
    constructor(id) {
    this._id = id
    }

    get id() {
    return this._id
    }
}
```

#### ğŸ˜ƒ After
```javascript
class Order {
    constructor(data) {
        this._number = data.number
        this._customer = registerCustomer(data.customerId)
    }

    get customer() {
        return this._customer
    }
}

class Customer {
    constructor(id) {
        this._id = id
    }

    get id() {
        return this._id
    }
}

// ì €ì¥ì†Œ ê°ì²´
let _repositoryData

export const initialize = () => {
    _repositoryData = {}
    _repositoryData.customer = new Map()
}

export const findCustomer = (id) => {
    return _repositoryData.customer.get(id)
}

export const registerCustomer = (id) => {
    if (!_repositoryData.customer.has(id)) {
        _repositoryData.customer.set(id, new Customer(id))
    }

    return findCustomer(id)
}
```